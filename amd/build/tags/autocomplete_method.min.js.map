{"version":3,"file":"autocomplete_method.min.js","sources":["../../src/tags/autocomplete_method.js"],"sourcesContent":["define(['core/ajax'], function(Ajax) {\n    return {\n        // Public variables and functions.\n        /**\n         * Process the results returned from transport (convert to value + label)\n         *\n         * @method processResults\n         * @param {String} selector\n         * @param {Array} data\n         * @return {Array}\n         */\n        processResults: function(selector, data) {\n            const tags = data.map(function(tag) {\n                const value = tag.id;\n                let label = tag.name;\n                if (tag.id === -1) {\n                    label = 'Create: ' + tag.name;\n                }\n                return {label, value};\n            });\n            return tags;\n        },\n\n        /**\n         * Fetch results based on the current query. This also renders each result from a template before returning them.\n         *\n         * @method transport\n         * @param {String} searchText\n         * @param {String} query\n         * @param {Function} success\n         * @param {Function} failure\n         */\n        transport: function(searchText, query, success, failure) {\n            {\n                Ajax.call([{\n                    methodname: 'local_dta_get_tags',\n                    args: {searchText: query},\n                    done: function(result) {\n                        if (result.length === 0) {\n                            success([{name: query, id: -1}]);\n                        } else {\n                            success(result);\n                        }\n                    },\n                    fail: failure\n                }]);\n            }\n        }\n    };\n});"],"names":["define","Ajax","processResults","selector","data","map","tag","value","id","label","name","transport","searchText","query","success","failure","call","methodname","args","done","result","length","fail"],"mappings":"AAAAA,4CAAO,CAAC,cAAc,SAASC,YACpB,CAUHC,eAAgB,SAASC,SAAUC,aAClBA,KAAKC,KAAI,SAASC,WACrBC,MAAQD,IAAIE,OACdC,MAAQH,IAAII,YACA,IAAZJ,IAAIE,KACJC,MAAQ,WAAaH,IAAII,MAEtB,CAACD,MAAAA,MAAOF,MAAAA,WAcvBI,UAAW,SAASC,WAAYC,MAAOC,QAASC,SAExCd,KAAKe,KAAK,CAAC,CACPC,WAAY,qBACZC,KAAM,CAACN,WAAYC,OACnBM,KAAM,SAASC,QACW,IAAlBA,OAAOC,OACPP,QAAQ,CAAC,CAACJ,KAAMG,MAAOL,IAAK,KAE5BM,QAAQM,SAGhBE,KAAMP"}